/* This file is part of OWL JavaScript Utilities.

OWL JavaScript Utilities is free software: you can redistribute it and/or 
modify it under the terms of the GNU Lesser General Public License
as published by the Free Software Foundation, either version 3 of
the License, or (at your option) any later version.

OWL JavaScript Utilities is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public 
License along with OWL JavaScript Utilities.  If not, see 
<http://www.gnu.org/licenses/>.
*/owl=function(){function h(a){if(window.Node)return a instanceof Node;if(a===document)return!0;return typeof a.nodeType=="number"&&a.attributes&&a.childNodes&&a.cloneNode}function g(a,b){var c=new f;b&&(c.maxDepth=b);return c.deepCopy(a)}function f(){this.copiedObjects=[],thisPass=this,this.recursiveDeepCopy=function(a){return thisPass.deepCopy(a)},this.depth=0}function e(a){for(var b in a)this[b]=a[b]}function c(a){if(typeof a!="object")return a;var c=a.valueOf();if(a!=c)return new a.constructor(c);if(a instanceof a.constructor&&a.constructor!==Object){var d=b(a.constructor.prototype);for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e])}else{var d={};for(var e in a)d[e]=a[e]}return d}function b(b){if(typeof b=="object"){a.prototype=b;return new a}return b}function a(){}var d=[];e.prototype={constructor:e,canCopy:function(a){return!1},create:function(a){},populate:function(a,b,c){}},f.prototype={constructor:f,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){var b=this.copiedObjects,c=b.length;for(var d=0;d<c;d++)if(b[d][0]===a)return b[d][1];return undefined},deepCopy:function(a){if(a===null)return null;if(typeof a!="object")return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<d.length;c++){var e=d[c];if(e.canCopy(a))return this.applyDeepCopier(e,a)}throw new Error("no DeepCopier is able to copy "+a)},applyDeepCopier:function(a,b){var c=a.create(b);this.cacheResult(b,c),this.depth++;if(this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");a.populate(this.recursiveDeepCopy,b,c),this.depth--;return c}},g.DeepCopier=e,g.deepCopiers=d,g.register=function(a){a instanceof e||(a=new e(a)),d.unshift(a)},g.register({canCopy:function(a){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),g.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),g.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),g.register({canCopy:function(a){return h(a)},create:function(a){if(a===document)return document;return a.cloneNode(!1)},populate:function(a,b,c){if(b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}});return{DeepCopyAlgorithm:f,copy:c,clone:b,deepCopy:g}}()